{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","services/image-api.js","App.js","reportWebVitals.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","state","imageQuery","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","s","SearchForm","this","SearchFormInput","type","autoComplete","autoFocus","placeholder","name","onChange","SearchFormButton","SearchFormButtonLabel","Component","ImageGalleryItem","images","onClick","map","image","key","id","ImageGalleryItemImage","src","webformatURL","data-image","largeImageURL","alt","ImageGallery","ButtonLoadMore","Button","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBbackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","api","fetchImage","currentPage","fetch","then","response","ok","json","Promise","reject","Error","App","largeImage","isLoading","toggleModal","onClickImage","nodeName","dataset","handleFormSubmit","options","imageApi","hits","prevState","scrollTo","top","body","scrollHeight","behavior","catch","finally","prevProps","color","height","width","length","autoClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4d1ddba8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1XvEu\",\"Modal\":\"Modal_Modal__37nn6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3M4mQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1GauX\"};","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = { imageQuery: \"\" };\r\n\r\n  static propTypes = {\r\n    imageQuery: PropTypes.string,\r\n  };\r\n  handleNameChange = (event) => {\r\n    this.setState({ imageQuery: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (this.state.imageQuery.trim() === \"\") {\r\n      toast.error(\"Введите запрос.\");\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.imageQuery);\r\n    this.setState({ imageQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            name=\"imageQuery\"\r\n            value={this.state.imageQuery}\r\n            onChange={this.handleNameChange}\r\n          />\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGalleryItem.module.css\";\r\n\r\nfunction ImageGalleryItem({ images, onClick }) {\r\n  return (\r\n    <>\r\n      {images.map((image) => (\r\n        <li key={image.id} className={s.ImageGalleryItem} onClick={onClick}>\r\n          <img\r\n            className={s.ImageGalleryItemImage}\r\n            src={image.webformatURL}\r\n            data-image={image.largeImageURL}\r\n            alt=\"\"\r\n          />\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  images: PropTypes.array,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport s from \"./ImageGallery.module.css\";\r\n\r\nfunction ImageGallery({ images, onClick }) {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      <ImageGalleryItem images={images} onClick={onClick} />\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport s from \"./Button.module.css\";\r\n\r\nfunction ButtonLoadMore({ onClick }) {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default ButtonLoadMore;\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport s from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n      // console.log('escape');\r\n    }\r\n  };\r\n\r\n  handleBbackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n      // console.log('backdrop');\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleBbackdropClick}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","const API_KEY = \"18969292-6634fe46747360e3150bf5a1e\";\r\nconst BASE_URL = `https://pixabay.com/api`;\r\n\r\nfunction fetchImage({ imageQuery = \"\", currentPage = 1 }) {\r\n  return fetch(\r\n    `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${imageQuery}&page=${currentPage}&per_page=12&key=${API_KEY}`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(\r\n      new Error(`По вашему запросу ничего не найдено ${imageQuery}`)\r\n    );\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImage,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Searchbar from \"./components/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery\";\r\nimport ButtonLoadMore from \"./components/Button\";\r\nimport Modal from \"./components/Modal\";\r\nimport imageApi from \"./services/image-api\";\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    currentPage: 1,\r\n    imageQuery: \"\",\r\n    largeImage: \"\",\r\n    isLoading: false,\r\n    error: null,\r\n  };\r\n  static propTypes = {\r\n    imageQuery: PropTypes.string,\r\n    images: PropTypes.array,\r\n    currentPage: PropTypes.number,\r\n    isLoading: PropTypes.bool,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.imageQuery !== this.state.imageQuery) {\r\n      this.fetchImage();\r\n    }\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState({\r\n      largeImage: \"\",\r\n    });\r\n  };\r\n\r\n  onClickImage = (e) => {\r\n    e.preventDefault();\r\n    if (e.target.nodeName === \"IMG\") {\r\n      this.setState({ largeImage: e.target.dataset.image });\r\n    }\r\n  };\r\n\r\n  handleFormSubmit = (imageQuery) => {\r\n    this.setState({ imageQuery, currentPage: 1, images: [] });\r\n  };\r\n\r\n  fetchImage = () => {\r\n    const { currentPage, imageQuery } = this.state;\r\n\r\n    const options = {\r\n      currentPage,\r\n      imageQuery,\r\n    };\r\n    this.setState({ isLoading: true });\r\n    imageApi\r\n      .fetchImage(options)\r\n      .then(({ hits }) =>\r\n        this.setState((prevState) => ({\r\n          images: [...prevState.images, ...hits],\r\n          currentPage: prevState.currentPage + 1,\r\n        }))\r\n      )\r\n      .then(() => {\r\n        window.scrollTo({\r\n          top: document.body.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      })\r\n      .catch((error) => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  };\r\n\r\n  render() {\r\n    const { images, isLoading, largeImage } = this.state;\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n        <ImageGallery images={images} onClick={this.onClickImage} />\r\n        <div className=\"spinner\">\r\n          {isLoading && (\r\n            <Loader\r\n              type=\"BallTriangle\"\r\n              color=\"#00BFFF\"\r\n              height={80}\r\n              width={80}\r\n            />\r\n          )}\r\n        </div>\r\n        {images.length > 0 && <ButtonLoadMore onClick={this.fetchImage} />}\r\n        {largeImage && (\r\n          <Modal onClose={this.toggleModal}>\r\n            <img src={this.state.largeImage} alt=\"modal\" />\r\n          </Modal>\r\n        )}\r\n        <ToastContainer autoClose={2000} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__RNp9I\",\"SearchForm\":\"Searchbar_SearchForm__3dfon\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2sWVC\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3E2e8\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1IWhm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2NbnZ\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2TCOj\"};"],"sourceRoot":""}